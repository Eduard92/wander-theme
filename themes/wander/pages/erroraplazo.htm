title = "Ocurrio un errror"
url = "reservacion/aplazo/error/:id"
layout = "layout"
is_hidden = 0
robot_index = "index"
robot_follow = "follow"

[miReserva]
==
{% if reserva %}

{% set reserva = reserva %}
{% set inicio = reserva.inicio|date('Y-m-d') %}
{% set hoy = "now"|date('Y-m-d') %}
{% set diasFaltantes = ((reserva.inicio|date('U')) - ("now"|date('U'))) / 86400 %}
{% set total = reserva.costo_total %}

<style>
.newbtn{
    background-color: #F1B23F;
    border: solid 1px #F1B23F;
    color: #ffffff;
    max-width:80%;
    max-width:100%
    letter-spacing: 1.2px;
        font-size: 1rem;
    cursor: pointer;
    text-transform: uppercase;
    text-decoration: none;
    font-family: "Oswald", sans-serif;
    font-weight: 500;
    min-width:300px;
}
.newbtn:hover{
    background-color: #EA7F26;
    border: solid 1px #EA7F26;
}

.aplazo{
    letter-spacing: 1.2px;
        background-color: #7fedfa;
            border: solid 1px #7fedfa;

            font-size: 1rem;
    cursor: pointer;
    text-transform: uppercase;
    text-decoration: none;
    font-family: "Oswald", sans-serif;
    font-weight: 500;
    width:300px
    }
    
    
    .aplazo:hover{
        background-color: #4cc1cf;
            border: solid 1px #4cc1cf;
}


    
</style>


    {{ form_ajax('onRecuperar')}}

<article class="bg-gen">
  <div class="reservaCt">
    <div class="descFullPage">
      <img src="{{ 'assets/img/logos/logo-wander-black-text.svg'|theme }}" alt="Wander">
      <h2>{{ 'errorPagoReserva'|_ }}</h2>
    </div>
    <div class="payContent">
      <div class="container">
        <div class="row justify-content-center align-items-start g-4">
          <div class="col-12 col-md-6">
          <h4>{{reserva.user.name}}<br>
          <small>{{reserva.user.email}}  +{{reserva.user.codigo_telefonico}} {{reserva.user.telefono}}</small><br><br>
          {{ 'Cabaña'|_ }} {{reserva.cabana.nombre}} {{ 'en'|_ }} {{reserva.ubicacion.nombre}}, {{reserva.noches}} {{ 'noches'|_ }}.<br></h4>

            <div class="payContent__box" style="text-align=left;">

              <p><small>{{ 'numeroDeReservacion'|_ }}: </small>{{reserva.id}}<br>
              <small>{{ 'Estatus'|_ }}: </small>{{reserva.estatus}}<br>
              <small>{{ 'reservadoEl'|_ }}: </small>{{reserva.created_at|date("d/m/Y H:m")}}hrs.<br>
              <br>
              <small>{{ 'checkIn'|_ }}: </small>{{reserva.inicio|date("d/m/Y")}} 16:00hrs.<br>
              <small>{{ 'checkOut'|_ }}: </small>{{reserva.fin|date("d/m/Y")}} 12:00hrs.<br>
              <small>{{ 'Adultos'|_ }}: </small>{{reserva.adultos}}<br>
              <small>{{ 'Niños'|_ }}: </small>{{reserva.ninos}}<br>
              <small>{{ 'accesoAMascotas'|_ }}: </small>{% if reserva.mascotas == 0 %}NO{% else %}SI{% endif %}<br>
              <br>
              <small>{{ 'Total'|_ }}: </small>${{reserva.costo_total|number_format(2, '.', ',') }} <small>MXN.</small><br><br>
              <small>{{ 'cuponDeDescuento'|_ }}: </small>{% if reserva.cupon %}{{reserva.cupon.cupon}} <br>
                  <small>{{ 'porcentajeDescuento'|_ }}: </small> {{reserva.cupon.descuento}} % <br>
                  <small>{{ 'montoDeDescuento'|_ }}: </small> ${{reserva.descuento}}<br>{% else %}{{ 'noAplico'|_ }}{% endif %}<br>

              <small>{{ 'claveDeAcceso'|_ }}: </small>{{reserva.cabana.clave_acceso}}<br><br>


               {{ 'nuestroEquipoContacto'|_ }}<br>

              </p>
              
            </div>
            
            {% if reserva.servicios %}
                <h4>{{ 'serviciosExtra'|_ }}:<br/>
                    {% for servicio in reserva.servicios %}
                        {% if servicio.servicio.tipo == 'kit' %}
                            <small>{{servicio.servicio.nombre}} ${{servicio.costo|number_format(2, '.', ',') }} <small>MXN.</small></small><br/>
                        {% elseif servicio.servicio.tipo == 'extended' %}
                            <small>{{servicio.servicio.nombre}} ${{servicio.costo|number_format(2, '.', ',') }} <small>MXN.</small></small><br/>
                        {% elseif servicio.servicio.tipo == 'actividad' %}
                            <small>{{servicio.cantidad}} {{servicio.servicio.nombre}} {{ 'por'|_ }} {{servicio.dias}} {{ 'dias'|_ }} ${{servicio.costo|number_format(2, '.', ',') }} <small>MXN.</small></small><br/>
                        {% elseif servicio.servicio.tipo == 'alimentos' %}
                            <small>{{servicio.cantidad}} {{servicio.servicio.nombre}} {{ 'por'|_ }} {{servicio.dias}} {{ 'dias'|_ }} ${{servicio.costo|number_format(2, '.', ',') }} <small>MXN.</small></small><br/>
                        {% elseif servicio.servicio.tipo == 'amenidades' %}
                            <small>{{servicio.cantidad}} {{servicio.servicio.nombre}} {{ 'laNoche'|_ }} {{servicio.fecha}} ${{servicio.costo|number_format(2, '.', ',') }} <small>MXN.</small></small><br/>
                        {% else  %}
                            <small>{{servicio.cantidad}} {{servicio.servicio.nombre}} ${{servicio.costo|number_format(2, '.', ',') }} <small>MXN.</small></small><br/>
                        {% endif %}

                    {% endfor %}
                </h4>
                <br>
            {% endif %}

            <h4>{{ 'Huéspedes'|_ }}:<br/>
            {% for huesped in reserva.huespedes %}
                <small>{{huesped.nombre}} - {{huesped.edad}} {{ 'anos'|_ }}</small><br/>
            {% endfor %}
            </h4>
          </div><!-- end.col-* -->
          <!-- Columna derecha: Opciones de pago / recuperación -->
    <!-- Columna derecha: Métodos de pago -->
            <div class="col-12 col-md-6 d-flex justify-content-center">
            
              <input name="id_reserva" type="hidden" value="{{reserva.id}}">
            
            
              <div class="d-flex flex-column justify-content-center align-items-center w-100" style="min-height:100%;">
                <div class="card-body payMet text-center">
                  <div class="payMet__desc text-center mb-4">
                    <h4>{{ 'alternativasDePago'|_ }}</h4>
                  </div>
            
                  <div class="d-flex flex-column gap-3 align-items-center w-100">
                    <input type="hidden" name="resMetodo" id="resMetodo">
            
                    <!-- Tarjeta con Stripe -->
                    <button type="submit" class="btn btnpr btnpr__primary--border newbtn align-items-center justify-content-center p-3"
                            onclick="document.getElementById('resMetodo').value='tarjeta'">
                      <i class="fa fa-credit-card mr-2"></i> {{ 'tarjetaCreditoDebito'|_ }}
                      <img src="https://upload.wikimedia.org/wikipedia/commons/b/ba/Stripe_Logo%2C_revised_2016.svg" 
                           alt="Stripe" style="height:20px; margin-left:8px;">
                    </button>
            
                    {% if diasFaltantes > 5 %}
                      <!-- Transferencia con Stripe -->
                      <button type="submit" class="btn btnpr btnpr__primary--border newbtn align-items-center justify-content-center p-3"
                              onclick="document.getElementById('resMetodo').value='transferencia'">
                        <i class="fa fa-bank mr-2"></i> {{ 'transferenciaBancaria'|_ }}
                        <img src="https://upload.wikimedia.org/wikipedia/commons/b/ba/Stripe_Logo%2C_revised_2016.svg" 
                             alt="Stripe" style="height:20px; margin-left:8px;">
                      </button>
                    {% endif %}
            
                    {% if diasFaltantes > 14 and total < 10000 %}
                      <!-- Oxxo -->
                      <button type="submit" class="btn btnpr btnpr__primary--border newbtn align-items-center justify-content-center p-3"
                              onclick="document.getElementById('resMetodo').value='oxxo'">
                        <i class="fa fa-store mr-2"></i> {{ 'Oxxo'|_ }}
                        <img src="https://upload.wikimedia.org/wikipedia/commons/b/ba/Stripe_Logo%2C_revised_2016.svg" 
                             alt="Stripe" style="height:20px; margin-left:8px;">
                      </button>
                    {% endif %}
            
                    <!-- Aplazo -->
                  </div>
                </div>
              </div>
            </div>
                
          
        </div><!-- end.row -->
      </div><!-- end.container -->
    </div><!-- end.payContent -->
  </div><!-- end.reservaCt -->
</article><!-- end.bg-gen -->
    {{ form_ajax('onRecuperar')}}

{% else %}

<article class="bg-gen">
  <div class="reservaCt">
    <div class="descFullPage">
      <img src="{{ 'assets/img/logos/logo-wander-black-text.svg'|theme }}" alt="Wander">
      <h2>{{ 'ocurrioUnError'|_ }}</h2>
    </div>
       <div class="payContent">
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-12 col-md-6 col-lg-6">
            <h4>{{ 'noSeEncontroReserva'|_ }}</h4><br>
          </div>
        </div>
     </div>
  </div>
</article>

{% endif %}